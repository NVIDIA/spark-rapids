ARG DOCKER_REPO
FROM ${DOCKER_REPO}/spark:k8s-cicd-spark301

ADD dist/target/rapids-4-spark_2.12-0.3.0-SNAPSHOT.jar /opt/spark/jars/
ADD integration_tests/target/rapids-4-spark-integration-tests_2.12-0.3.0-SNAPSHOT-jar-with-dependencies.jar /opt/spark/jars/
ADD integration_tests/target/dependency/cudf-*.jar /opt/spark/jars/

ENV SPARK_EXTRA_CLASSPATH=/opt/hadoop-3.2.0/share/hadoop/tools/lib/hadoop-aws-3.2.0.jar:/opt/hadoop-3.2.0/share/hadoop/tools/lib/aws-java-sdk-bundle-1.11.375.jar:/opt/spark/jars/rapids-4-spark_2.12-0.3.0-SNAPSHOT.jar:/opt/spark/jars/cudf-0.16-20201021.110915-56-cuda10-1.jar:/opt/spark/jars/rapids-4-spark-integration-tests_2.12-0.3.0-SNAPSHOT-jar-with-dependencies.jar

