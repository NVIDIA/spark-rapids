<!--
 Copyright (c) 2022, NVIDIA CORPORATION.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- font Awesome -->
  <link rel="stylesheet" type="text/css" href="../assets/fontawesome-free-5.15.4-web/css/fontawesome.min.css"/>
  <link rel="stylesheet" type="text/css" href="../assets/fontawesome-free-5.15.4-web/css/solid.min.css"/>
  <link rel="stylesheet" type="text/css" href="../assets/fontawesome-free-5.15.4-web/css/brands.min.css"/>

  <!-- bootstrap4 CSS -->
  <link rel="stylesheet" type="text/css" href="../assets/bootstrap-4.6.1-dist/css/bootstrap.min.css"/>

  <!-- datatables CSS -->
  <link rel="stylesheet" type="text/css" href="../assets/dataTables.bootstrap4.min.css"/>
  <link rel="stylesheet" type="text/css"
        href="../assets/buttons.bootstrap4.min.css"/>
  <link rel="stylesheet" type="text/css"
        href="../assets/responsive.bootstrap4.min.css"/>
  <link rel="stylesheet" type="text/css"
        href="../assets/searchPanes.bootstrap4.min.css"/>
  <link rel="stylesheet" type="text/css"
        href="../assets/select.bootstrap4.min.css"/>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="../assets/spur/dist/css/spur.min.css">
  <link rel="stylesheet" href="../css/rapids-dashboard.css">

  <!-- JQuery and Bootstrap4 -->
  <script type="text/javascript" src="../assets/jquery-3.6.0.min.js"></script>
  <script type="text/javascript"
          src="../assets/bootstrap-4.6.1-dist/js/bootstrap.bundle.min.js"></script>

  <!-- datatables JS -->
  <script type="text/javascript"
          src="../assets/jquery.dataTables.min.js"></script>
  <script type="text/javascript"
          src="../assets/dataTables.bootstrap4.min.js"></script>
  <script type="text/javascript"
          src="../assets/dataTables.buttons.min.js"></script>
  <script type="text/javascript"
          src="../assets/buttons.bootstrap4.min.js"></script>
  <script type="text/javascript"
          src="../assets/buttons.html5.min.js"></script>
  <script type="text/javascript"
          src="../assets/dataTables.responsive.min.js"></script>
  <script type="text/javascript"
          src="../assets/dataTables.searchPanes.min.js"></script>
  <script type="text/javascript"
          src="../assets/searchPanes.bootstrap4.min.js"></script>
  <script type="text/javascript"
          src="../assets/dataTables.select.min.js"></script>
  <script type="text/javascript"
          src="../assets/responsive.bootstrap4.min.js"></script>

  <!-- Dynamic code replacement using Mustache -->
  <script src="../assets/mustache-2.3.0.min.js"></script>

  <title>Spark Qualification tool - Application Report</title>
</head>

<body>
<div class="dash">
  <div class="dash-nav dash-nav-dark">
    <header>
      <a href="#!" class="menu-toggle">
        <i class="fas fa-bars"></i>
      </a>
      <a href="index.html" class="spur-logo"><span>Spark RAPIDS</span></a>
    </header>
    <nav class="dash-nav-list">
      <a href="index.html" class="dash-nav-item">
        <i class="fas fa-home"></i> Dashboard </a>
      <div class="dash-nav-dropdown show">
        <a href="#!" class="dash-nav-item dash-nav-dropdown-toggle">
          <i class="fas fa-chart-bar"></i> Reports </a>
        <div class="dash-nav-dropdown-menu">
          <a href="raw.html" class="dash-nav-dropdown-item">Raw Data</a>
        </div>
      </div>
      <div class="dash-nav-dropdown show">
        <a href="#!" class="dash-nav-item dash-nav-dropdown-toggle">
          <i class="fas fa-info"></i> About </a>
        <div class="dash-nav-dropdown-menu">
          <a href="https://github.com/NVIDIA/spark-rapids" target="_blank" class="dash-nav-dropdown-item">GitHub</a>
          <a href="https://nvidia.github.io/spark-rapids/" target="_blank" class="dash-nav-dropdown-item">Qualification
            Docs</a>
        </div>
      </div>
    </nav>
  </div>
  <div class="dash-app">
    <header class="dash-toolbar">
      <a href="#!" class="menu-toggle">
        <i class="fas fa-bars"></i>
      </a>
      <div class="tools">
        <a href="https://github.com/NVIDIA/spark-rapids" target="_blank" class="tools-item">
          <i class="fab fa-github"></i>
        </a>
        <div class="dropdown tools-item">
          <a href="#" class="" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-user"></i>
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
            <a class="dropdown-item" href="#!">Profile</a>
            <a class="dropdown-item" href="login.html">Logout</a>
          </div>
        </div>
      </div>
    </header>
    <main class="dash-content">
      <div class="container-fluid">
        <div id="app-report-page-header"></div>
        <!-- application details row -->
        <div class="row">
          <div class="col-lg-12">
            <div class="card spur-card">
              <div class="card-header">
                <div class="spur-card-icon">
                  <i class="fas fa-table"></i>
                </div>
                <div class="spur-card-title">Application Details</div>
              </div>
              <div class="card-body ">
                <div id="app-details-data">
                  <table id="app-details-data-table" class="table display datatable" style="width:100%">
                    <thead>
                    <tr>
                      <th>Name</th>
                      <th>User</th>
                      <th>Started</th>
                      <th>Completed</th>
                    </tr>
                    </thead>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- job details row -->
        <div class="row">
          <div class="col-lg-12">
            <div class="card spur-card">
              <div class="card-header">
                <div class="spur-card-icon">
                  <i class="fas fa-table"></i>
                </div>
                <div class="spur-card-title">Jobs</div>
              </div>
              <div class="card-body ">
                <div id="app-details-jobinfo-data">
                  <table id="app-details-jobinfo-table" class="table display datatable" style="width:100%">
                    <thead>
                    <tr>
                      <th>
                                <span data-toggle="tooltip" data-placement="top" title="Job ID.">
                                  Job ID
                                </span>
                      </th>
                      <th>
                                <span data-toggle="tooltip" data-placement="top" title="List of Stages in the Job.">
                                  Stage ID
                                </span>
                      </th>
                      <th>
                                <span data-toggle="tooltip" data-placement="top"
                                      title="List of SQL executed within the Job.">
                                  Sql
                                </span>
                      </th>

                      <th>
                                <span data-toggle="tooltip" data-placement="top"
                                      title="Started time of this application.">
                                  Started
                                </span>
                      </th>
                      <th>
                                <span data-toggle="tooltip" data-placement="top" title="The completed time of this Job">
                                  Completed
                                </span>
                      </th>
                    </tr>
                    </thead>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- DataSource details row -->
        <div class="row">
          <div class="col-lg-12">
            <div class="card spur-card">
              <div class="card-header">
                <div class="spur-card-icon">
                  <i class="fas fa-table"></i>
                </div>
                <div class="spur-card-title">DataSource Info</div>
              </div>
              <div class="card-body ">
                <div id="app-details-datasourceinfo-data">
                  <table id="app-details-datasourceinfo-table" class="table display datatable" style="width:100%">
                    <thead>
                    <th>
                              <span data-toggle="tooltip" data-placement="top" title="SQL ID.">
                                SqlID
                              </span>
                    </th>
                    <th>
                              <span data-toggle="tooltip" data-placement="top" title="Format of the Data Source">
                                Format
                              </span>
                    </th>
                    <th>
                              <span data-toggle="tooltip" data-placement="top" title="Path of the Data Source.">
                                Location
                              </span>
                    </th>
                    <th>
                              <span data-toggle="tooltip" data-placement="top"
                                    title="Filtered pushed to the level of the data source.">
                                Pushed Filters
                              </span>
                    </th>
                    <th>
                              <span data-toggle="tooltip" data-placement="top"
                                    title="The duration time of this application.">
                                Schema
                              </span>
                    </th>
                    </thead>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- operator details row -->
        <div class="row">
          <div class="col-lg-6">
            <div class="card spur-card">
              <div class="card-header">
                <div class="spur-card-icon">
                  <i class="fas fa-table"></i>
                </div>
                <div class="spur-card-title">Operators</div>
              </div>
              <div class="card-body ">
                <div id="app-details-opertators-data">
                  <table id="app-details-opertators-data-table" class="table display datatable" style="width:100%">
                    <thead>
                    <tr>
                      <th>Field</th>
                      <th>Description</th>
                      <th><span data-toggle="tooltip" data-placement="top"
                                title="Time duration that includes only SQL/Dataframe queries">
                                    Value</span></th>
                    </tr>
                    </thead>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- job details row -->
        <div class="row">
          <div class="col-lg-12">
            <div class="card spur-card">
              <div class="card-header">
                <div class="spur-card-icon">
                  <i class="fas fa-table"></i>
                </div>
                <div class="spur-card-title">SQL Plan Metrics</div>
              </div>
              <div class="card-body ">
                <div id="app-details-sqlplan-metrics-data">
                  <table id="app-details-sqlplan-metrics-table" class="table display datatable" style="width:100%">
                    <thead>
                    <tr>
                      <th>
                                <span data-toggle="tooltip" data-placement="top" title="Job ID.">
                                  Sql ID
                                </span>
                      </th>
                      <th>
                                <span data-toggle="tooltip" data-placement="top" title="List of Stages in the Job.">
                                  Node ID
                                </span>
                      </th>
                      <th>
                                <span data-toggle="tooltip" data-placement="top"
                                      title="List of SQL executed within the Job.">
                                  Node Name
                                </span>
                      </th>

                      <th>
                                <span data-toggle="tooltip" data-placement="top"
                                      title="Started time of this application.">
                                  Accumulator ID
                                </span>
                      </th>
                      <th>
                                <span data-toggle="tooltip" data-placement="top" title="The completed time of this Job">
                                  Name
                                </span>
                      </th>
                      <th>
                                <span data-toggle="tooltip" data-placement="top" title="The completed time of this Job">
                                  Max Value
                                </span>
                      </th>
                      <th>
                                <span data-toggle="tooltip" data-placement="top" title="The completed time of this Job">
                                  Stage Ids
                                </span>
                      </th>
                    </tr>
                    </thead>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
<!-- Dynamic code replacement using Mustache -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>
<script id="app-report-page-header-template" type="text/template">
  <h1 class="dash-title">App Details: {{qualInfo.appName}} {{{extension.badgeWrapper}}}</h1>

  <div class="row">
    <div class="col-lg-2">
      <div class="stats stats-primary">
        <h3 class="stats-title"> Timing </h3>
        <div class="stats-content">
          <div class="stats-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="stats-data">
            <div class="stats-number">{{qualInfo.durationCollection.appDuration}}</div>
            <div class="stats-change">
              <span class="stats-percentage">{{appInfo.displayFields.startTime}}</span>
              <span class="stats-timeframe">Start</span>
            </div>
            <div class="stats-change">
              <span class="stats-percentage">{{appInfo.displayFields.endTime}}</span>
              <span class="stats-timeframe">End</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-2">
      <div class="stats stats-primary">
        <h3 class="stats-title"> GPU Opportunity </h3>
        <div class="stats-content">
          <div class="stats-icon">
            <i class="fas fa-rocket"></i>
          </div>
          <div class="stats-data">
            <div class="stats-number">{{extension.accelerationOpportunity}}</div>
            <div class="stats-change">
              <span class="stats-percentage">{{qualInfo.durationCollection.speedupDuration}}</span>
              <span class="stats-timeframe">Supported</span>
            </div>
            <div class="stats-change">
              <span class="stats-percentage">{{extension.speedUp}}</span>
              <span class="stats-timeframe">Speedup Factor</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-2">
      <div class="stats stats-primary">
        <h3 class="stats-title"> SQL Duration </h3>
        <div class="stats-content">
          <div class="stats-icon">
            <i class="fas fa-database"></i>
          </div>
          <div class="stats-data">
            <div class="stats-number">{{qualInfo.durationCollection.sqlDFDuration}}</div>
            <div class="stats-change">
              <span class="stats-timeframe">Longest</span>
              <span class="stats-percentage">{{qualInfo.durationCollection.longestSqlDuration}}</span>
            </div>
            <div class="stats-change">
              <span class="stats-percentage">{{qualInfo.durationCollection.sqlDurationProblems}}</span>
              <span class="stats-timeframe">Problems</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-2">
      <div class="stats stats-primary">
        <h3 class="stats-title"> Operators </h3>
        <div class="stats-content">
          <div class="stats-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <div class="stats-data">
            <div class="stats-number">N/A</div>
            <div class="stats-change">
              <span class="stats-timeframe">Longest</span>
              <span class="stats-percentage">N/A</span>
            </div>
            <div class="stats-change">
              <span class="stats-timeframe">Problems</span>
              <span class="stats-percentage">N/A</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</script>

<script src="../js/mock-data.js"></script>
<script src="../js/ui-data.js"></script>
<script src="../js/uiutils.js"></script>
<script src="../js/app-report.js"></script>


</body>

</html>
